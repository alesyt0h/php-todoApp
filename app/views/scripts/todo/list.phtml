<div class="error-msg" style="background: red"><?php echo (isset($_SESSION['deleteError'])) ? $_SESSION['deleteError'] : null; unset($_SESSION['deleteError']); ?></div>
<?php $reqFrom = (isset($_SERVER['REQUEST_URI'])) ? $_SERVER['REQUEST_URI'] : '';
      $reqFrom = preg_match('/\/todo\/list/', $reqFrom); ?>
<?php if( count( $this->userTodos ?? [] ) ){ ?>
  <table style="border: 1px solid black" <?php echo (!$reqFrom) ? "class='todo-table'" : ''; ?>>
    <caption>myTodos</caption>
    <tr>
      <th style="border: 1px solid black">Todo</th>
      <th style="border: 1px solid black">Status</th>
      <th style="border: 1px solid black">Edit</th>
      <th style="border: 1px solid black">Delete</th>
    </tr>
      <?php
        foreach($this->userTodos as $todo){
            echo "
            <tr id='todo-{$todo['id']}' " . (($todo['status'] === 'Completed') ? "class='todo-completed'" : null) . ">
                <td>{$todo['title']}</td>
                <td>{$todo['status']}</td>
                <td><a href=" . WEB_ROOT . '/todo/edit/' . $todo['id'] . ">Edit</a></td>
                <td><a href=" . '?delete=' . $todo['id'] . ">Delete</a></td>
            </tr>
            ";
        }
      ?>
  </table>

  <?php 
    if(isset($_GET['delete']) || isset($_GET['assign'])){
      echo $this->_renderViewScript('global/modal.phtml', true); 
    }
  ?>

<?php } else { echo 'Try to add some TODO see it here!!'; } ?>
